<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/carbon-route/carbon-location.html">
<link rel="import" href="../../bower_components/carbon-route/carbon-route.html">
<link rel="import" href="snw-protected-routes.html">

<dom-module id="snw-router">
  <template>
    <carbon-location route="{{_route}}" use-hash-as-path></carbon-location>
    <carbon-route route="{{_route}}" pattern="/:page" data="{{_page}}" tail="{{_tail}}"></carbon-route>
    <snw-protected-routes route="[[_route]]"></snw-protected-routes>
  </template>

  <script>
    (function(){
      'use strict';
      Polymer({
        is: 'snw-router',

        properties:{
          page:{
            type: String,
            notify: true
          },

          _page:{
            type: Object,
            notify: true,
            observer: '_pageChanged'
          },

          tail:{
            type: Object,
            notify: true
          },

          _tail:{
            type: Object,
            notify: true,
            observer: '_tailChanged'
          }
        },
        
        _pageChanged: function(_page){
          if(!_page.page){
            this.page = 'home'
          }else{
            this.page = _page.page;
          }
        },

        _tailChanged: function(_tail){
          this.tail = _tail;
        }
      });
    })();
  </script>
</dom-module>